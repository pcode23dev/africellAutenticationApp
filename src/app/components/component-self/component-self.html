<div class="step-container active">
  <div class="step-header">
    <div class="step-number">3</div>
    <h2 class="step-title">Foto Facial</h2>
    <p class="step-description">Posicione seu rosto dentro do círculo e tire uma foto</p>
  </div>

  @if (!visualizacao) {
  <div class="camera-container">
    <video #video class="camera-video" autoplay playsinline></video>
    <div class="camera-overlay"></div>
    <canvas #canvas style="display: none;"></canvas>
  </div>
  <div class="camera-controls">
    <div class="capture-btn" (click)="capturarFoto()">
      <i class="fas fa-camera"></i>
    </div>
    <p class="upload-subtext mt-2">Posicione seu rosto dentro do círculo</p>
    <div class="camera-switch">
      <button type="button" (click)="trocarCamera()">
        <i class="fas fa-sync-alt"></i> Trocar Câmera
      </button>
    </div>
    <button class="btn btn-secondary" type="button" (click)="voltar()">
      <i class="fas fa-arrow-left"></i> Voltar
    </button>
  </div>
  }


  @if (loading()) {
  <div class="overlay">
    <div class="spinner"></div>
  </div>
  }

  <!-- área onde a imagem capturada e botões aparecem -->
@if (visualizacao) {
  <div class="text-center">
    <img [src]="visualizacao" class="captured-photo" alt="Foto capturada">
    @if (erro() && !loading()) {
      <div class="alert alert-info">{{ erro() }}</div>
    }
    <button class="retake-btn" type="button" (click)="tirarNovamente()">Tirar Nova Foto</button>
    <button class="btn btn-primary mt-3" type="button" (click)="continuar()">Avançar</button>
    <button class="btn btn-secondary mt-2" type="button" (click)="voltar()">Voltar</button>
  </div>
}

</div>